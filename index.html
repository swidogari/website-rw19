<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rukun Warga 19 Cotton Field</title>
  <link rel="stylesheet" href="style?v=2.css">
</head>
<body>
  <header>
    <img src="logorw19.png" alt="Logo RW 19">
    <div>
      <h1>Rukun Warga 19 Cotton Field</h1>
      <h1>Cibubur Country</h1>
      <p>Portal Informasi Warga</p>
    </div>
  </header>

  <nav>
    <a href="#" onclick="showTab('pengumuman')">Pengumuman</a>
    <a href="#" onclick="showTab('ipl')">IPL</a>
    <a href="#" onclick="showTab('laporan')">Laporan Pengaduan</a>
    <a href="#" onclick="showTab('informasi')">Informasi</a>
    <a href="#" onclick="showTab('admin')">Admin</a>
  </nav>

  <section id="pengumuman" class="active">
    <h2>Pengumuman</h2>
    <p>Tempat untuk menampilkan pengumuman terbaru dari RW 19.</p>
  </section>

  <section id="ipl">
    <h2>Informasi Pembayaran IPL</h2>
    <p>Data iuran pemeliharaan lingkungan (IPL) warga dapat ditampilkan di sini.</p>

    <div class="ipl-menu">
      <a href="https://forms.gle/VTApxZAiN8B65kjX6" target="_blank" class="btn">üßæ Lapor Pembayaran</a>

      <div class="status-box">
        <h3>üîç Cek Status Pembayaran</h3>
        <form id="statusForm" onsubmit="checkStatus(event)">
          <input type="text" id="idWarga" name="idWarga" placeholder="Masukkan ID Warga" required>
          <button type="submit" class="btn">Cek</button>
        </form>
        <p id="statusResult"></p>
      </div>

      <div class="rekap-box">
        <h3>üìä Rekapitulasi IPL RW</h3>
        <iframe 
          src="https://docs.google.com/spreadsheets/d/e/2PACX-1vXXXXXXXXXXXXXXX/pubchart?oid=1234567890&amp;format=interactive"
          width="100%" 
          height="400" 
          frameborder="0">
        </iframe>
      </div>
    </div>
  </section>

  <section id="laporan">
    <h2>Laporan Pengaduan</h2>
    <form>
      <label>Nama:</label><br>
      <input type="text" name="nama" required><br><br>
      <label>Isi Laporan:</label><br>
      <textarea name="laporan" rows="5" required></textarea><br><br>
      <button type="submit">Kirim</button>
    </form>
  </section>

  <section id="informasi">
    <h2>Informasi Umum</h2>
    <p>Berisi data kontak pengurus RW, jadwal kegiatan, dan informasi penting lainnya.</p>
  </section>

  <section id="admin">
    <h2>Dashboard Admin</h2>
    <div id="loginForm">
      <p>Masukkan kata sandi untuk masuk ke dashboard:</p>
      <input type="password" id="adminPass" placeholder="Password">
      <button onclick="loginAdmin()">Masuk</button>
      <p id="loginMsg" style="color:red;"></p>
    </div>

    <div id="adminPanel" style="display:none;">
      <div class="admin-panel">
        <div class="admin-card">
          <h3>Kelola Pengumuman</h3>
          <p>Tambah, ubah, atau hapus pengumuman warga.</p>
        </div>
        <div class="admin-card">
          <h3>Data IPL</h3>
          <p>Perbarui status pembayaran IPL warga.</p>
        </div>
        <div class="admin-card">
          <h3>Laporan Masuk</h3>
          <p>Tinjau laporan pengaduan dari warga.</p>
        </div>
      </div>

      <div class="pengumuman-form">
        <h3>üìù Kelola Pengumuman Warga</h3>
        <form id="formPengumuman" onsubmit="simpanPengumuman(event)">
          <input type="hidden" id="editIndex">
          <label>Judul Pengumuman:</label>
          <input type="text" id="judul" required>

          <label>Isi Pengumuman:</label>
          <textarea id="isi" rows="4" required></textarea>

          <button type="submit">üíæ Simpan</button>
        </form>

        <h4>üìã Daftar Pengumuman</h4>
        <table id="tabelPengumuman">
          <thead>
            <tr>
              <th>No</th>
              <th>Judul</th>
              <th>Isi</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>

  <footer>
    <p>¬© 2025 Rukun Warga 19 Cotton Field</p>
  </footer>

  <script src="script?v=2.js"></script>
  <script>
    function showTab(id) {
      document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function loginAdmin() {
      const pass = document.getElementById('adminPass').value;
      const msg = document.getElementById('loginMsg');
      if (pass === 'rw19admin') {
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('adminPanel').style.display = 'block';
      } else {
        msg.textContent = 'Password salah!';
      }
    }
  </script>
  <script>
  async function checkStatus(event) {
    event.preventDefault();
    const id = document.getElementById('idWarga').value.trim();
    const result = document.getElementById('statusResult');
    result.textContent = "Memeriksa data...";

    try {
      const res = await fetch(`https://script.google.com/macros/s/AKfycbyw3-aFdIPaO-Bo_Au7fpoLaknhbsjcCqK7rhRxbzuyBHYLXtNQqy8huNNYkoWVtXh7eA/exec{AKfycbyw3-aFdIPaO-Bo_Au7fpoLaknhbsjcCqK7rhRxbzuyBHYLXtNQqy8huNNYkoWVtXh7eA}`);
      const data = await res.json();

      if (data.error) {
        result.textContent = "‚ùå ID tidak ditemukan.";
      } else {
        result.textContent = `‚úÖ ${data.nama} - Status: ${data.status} (Tanggal: ${data.tanggal || '-'})`;
      }
    } catch (err) {
      result.textContent = "‚ö†Ô∏è Terjadi kesalahan saat mengambil data.";
    }
  }
	</script>
</body>
</html>
